/*********************************************************************
*
*   MODULE:
*       intc.c
*
*   DESCRIPTION:
*       Interupt controller driver
*
*********************************************************************/

/*--------------------------------------------------------------------
                               INCLUDES
--------------------------------------------------------------------*/

#include <assert.h>
#include <stddef.h>
#include <stdint.h>
#include <string.h>

#include <kernel/interrupts/intc.h>

/*--------------------------------------------------------------------
                          LITERAL CONSTANTS
--------------------------------------------------------------------*/

/*--------------------------------------------------------------------
                                TYPES
--------------------------------------------------------------------*/

/*--------------------------------------------------------------------
                                MACROS
--------------------------------------------------------------------*/

/*--------------------------------------------------------------------
                           MEMORY CONSTANTS
--------------------------------------------------------------------*/

/*--------------------------------------------------------------------
                              VARIABLES
--------------------------------------------------------------------*/

struct intc_cnfg intc_cnfg;

/*--------------------------------------------------------------------
                              PROCEDURES
--------------------------------------------------------------------*/

/*********************************************************************
*
*   PROCEDURE NAME:
*       intc_init
*
*   DESCRIPTION:
*       Init interrupt controller driver.
*
*********************************************************************/
void intc_init
    (
    struct intc_cnfg cnfg
    )
    {
    /*------------------------------------------------------
    Validate inputs
    ------------------------------------------------------*/
    assert( intc_cnfg.intc_init != NULL );
    assert( intc_cnfg.intc_ack != NULL );
    
    /*------------------------------------------------------
    Install low level driver
    ------------------------------------------------------*/
    intc_cnfg.intc_init = cnfg.intc_init;
    intc_cnfg.intc_ack = cnfg.intc_ack;

    /*------------------------------------------------------
    Call low level driver init
    ------------------------------------------------------*/
    intc_cnfg.intc_init();

    }; /* intc_init() */


/*********************************************************************
*
*   PROCEDURE NAME:
*       intc_ack
*
*   DESCRIPTION:
*       Send EOI to interrupt controller
*
*********************************************************************/
void intc_ack
    (
    uint32_t            irq         /* The IRQ number to clear      */
    )
    {
    /*------------------------------------------------------
    Call low level driver ack
    ------------------------------------------------------*/
    intc_cnfg.intc_ack( irq );

    } /* intc_ack() */


/*********************************************************************
*
*   PROCEDURE NAME:
*       intc_hndlr
*
*   DESCRIPTION:
*       Interrupt controller interrupt handler. Call this from the
*       low level architecture specific handler.
*
*********************************************************************/
void intc_hndlr
    (
    uint32_t            irq
    )
    {
    
    }